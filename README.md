# VK Wordle

Бэкенд для игры в стиле Wordle, написанный на Go. Проект создан в образовательных целях и для развлечения.

## Технологии

- Go 1.22.3
- PostgreSQL (для хранения данных)
- FastHTTP (высокопроизводительный HTTP сервер)
- Goose (для управления миграциями базы данных)
- Docker и Docker Compose (для локальной разработки)

## Структура проекта

```
├── cmd/                # Точки входа в приложение
│   └── api/           # API сервер
├── internal/          # Внутренний код приложения
│   ├── app/          # Уровень приложения
│   ├── domain/       # Бизнес-логика и модели
│   └── infrastructure/ # Внешние зависимости (БД и т.д.)
├── migrations/        # Миграции базы данных
└── docker-compose.yml # Конфигурация Docker
```

## Запуск проекта

### Необходимые зависимости

- Go 1.22.3 или выше
- Docker и Docker Compose
- Make (опционально)

### Переменные окружения

Создайте файл `.env` в корне проекта со следующими переменными:

```env
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=vkwordle
DB_SSL_MODE=disable
```

### Запуск

1. Клонируйте репозиторий
2. Запустите базу данных:
   ```bash
   docker-compose up -d
   ```
3. Запустите приложение:
   ```bash
   go run cmd/api/main.go
   ```

## API

API сервер работает на порту 8180 и предоставляет следующие эндпоинты:

### Создание новой игры

```http
POST /api/v1/game/start
User-Id: 123
```

Начинает новую игру для пользователя. Требует заголовок `User-Id` для идентификации пользователя.

Ответ:
```json
{
    "game": {
        "id": 1,
        "userId": 123,
        "status": 0,
        "type": 5,
        "words": {},
        "keyboard": {}
    }
}
```

### Отправка слова

```http
POST /api/v1/game/word
User-Id: 123
Content-Type: application/json

{
    "word": "книга"
}
```

Отправляет попытку угадать слово. Требует заголовок `User-Id`.

Ответ:
```json
{
    "game": {
        "id": 1,
        "userId": 123,
        "status": 0,
        "type": 5,
        "words": {
            "1": {
                "word": "книга",
                "letters": {
                    "0": "correct",
                    "1": "wrong",
                    "2": "present",
                    "3": "wrong",
                    "4": "wrong"
                }
            }
        },
        "keyboard": {
            "к": "correct",
            "н": "wrong",
            "и": "present",
            "г": "wrong",
            "а": "wrong"
        }
    }
}
```

Статусы букв:
- `correct` - буква на правильном месте
- `present` - буква есть в слове, но на другом месте
- `wrong` - буквы нет в слове

### Получение подсказки

```http
GET /api/v1/game/hint
User-Id: 123
```

Получает подсказку для текущей игры. Требует заголовок `User-Id`.

Ответ:
```json
{
    "hint": "Подсказка для загаданного слова"
}
```

### Получение категории

```http
GET /api/v1/game/category
User-Id: 123
```

Получает категорию загаданного слова. Требует заголовок `User-Id`.

Ответ:
```json
{
    "category": "Название категории"
}
```

### Статусы игры

- `0` - игра в процессе
- `5` - игра проиграна
- `10` - игра выиграна

## Разработка

Проект следует принципам чистой архитектуры и разделен на слои:
- Domain (бизнес-логика)
- Application (координация и управление)
- Infrastructure (внешние зависимости)

### Тестирование

Для запуска тестов используйте:
```bash
go test ./...
```